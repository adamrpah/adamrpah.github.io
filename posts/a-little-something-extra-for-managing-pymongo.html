<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>A little something extra for managing PyMongo | NP Complete Heart</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://www.npcompleteheart.com/posts/a-little-something-extra-for-managing-pymongo.html">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><script src="http://d3js.org/d3.v3.min.js"></script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script type="text/javascript" src="jquery.v1-7-2.js"></script><script type="text/javascript" src="jquery.tipsy.js"></script><!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="Adam Pah">
<meta property="og:site_name" content="NP Complete Heart">
<meta property="og:title" content="A little something extra for managing PyMongo">
<meta property="og:url" content="http://www.npcompleteheart.com/posts/a-little-something-extra-for-managing-pymongo.html">
<meta property="og:description" content="I really dislike boilerplate code, it drives me a little bit crazy. Starting database connections falls squarely into that realm. So in the vein of &quot;sharing is caring&quot; here is what I'm currently using">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-12-17T07:46:48-05:00">
<meta property="article:tag" content="code">
<meta property="article:tag" content="mongodb">
<meta property="article:tag" content="pymongo">
<meta property="article:tag" content="python">
<link rel="stylesheet" href="assets/css/custom.css" type="text/css">
</head>
<body>

<!-- Menubar -->
<div class="wrapper">
</div>
<!-- <nav class="navbar-inverse navbar-static-top" role="navigation"> -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.npcompleteheart.com/">

                <span id="blog-title">NP Complete Heart</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../rss.xml"><img src="../images/rss.png"></a>
                </li>
<li>
<a href="../stories/about.html"><strong>About</strong></a>
                </li>
<li>
<a href="../pdf/curriculumvitae.pdf"><strong>Curriculum Vitae</strong></a>
                </li>
<li>
<a href="../stories/research.html"><strong>Research</strong></a>
                </li>
<li>
<a href="../stories/publications/publications.html"><strong>Publications</strong></a>
                </li>
<li>
<a href="../categories/index.html"><strong>Tags</strong></a>
                </li>
<li>
<a href="../stories/socialdna/index.html"><strong>SocialDNA</strong></a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">A little something extra for managing PyMongo</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Adam Pah
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2013-12-17T07:46:48-05:00" itemprop="datePublished" title="2013-12-17 07:46">2013-12-17 07:46</time></a></p>
            
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>
I really dislike boilerplate code, it drives me a little bit crazy. Starting database connections falls squarely into that realm. So in the vein of "sharing is caring" here is what I'm currently using with pymongo. It's pretty simple, but why code it twice right?
</p>

<!-- TEASER_END -->

<p>
It's  pretty simple script that only contains one class: MongoConnection. It needs to be initialized with a dictionary containing the connection parameters (preferably stored in a config file that you're just feeding in) like so.
<br></p>
<pre>
settings = {
  'user' : 'username',
  'pasword' : 'password',
  'host' : 'hostname',
  'port' : 'port',
  'db': 'db_name',
  'collection': 'collection_name'
}

import MongoConnect as mcxn
dbConnection = mcxn.MongoConnection(settings)
</pre>


<p>
With that it will have already initialized the specific database and collection needed, right away you can:
<br></p>
<pre>
#Insert a document
dbConnection.collection.insert({"body": "I am a sample document body", "name": "FunnyBunny"})
#Find that document!
dbConnection.collection.find({"name" : "FunnyBunny"})
#Close the connection to the database!
dbConnection.tearDown()
#Reopen it after closing it! Just go wild!
dbConnection.connect()
</pre>


<p>
So that's about it.  There is some basic error handling, which is to say don't push it.
</p>

<p>
The previous code is scratched, a new better version can be found in a <a href="https://gist.github.com/adamrpah/18f67498daf8fb8573a3">gist</a> that I will regularly update. Alternatively, you can just copy this <a href="https://gist.githubusercontent.com/adamrpah/18f67498daf8fb8573a3/raw/15b11b9db449cf72b3e6870ddc7dbc3f0dd74b45/mongoConnect.py">url</a> and use wget to download the script :)
</p>
<p></p>
</div>
    </div>
    <br><aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/code.html" rel="tag">code</a></li>
            <li><a class="tag p-category" href="../categories/mongodb.html" rel="tag">mongodb</a></li>
            <li><a class="tag p-category" href="../categories/pymongo.html" rel="tag">pymongo</a></li>
            <li><a class="tag p-category" href="../categories/python.html" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="wild-unsupportable-claims-about-how-product-x-sucks.html" rel="prev" title="Wild unsupportable claims about how Product X sucks!">Previous post</a>
            </li>
            <li class="next">
                <a href="man-i-wish-inspiration-could-strike-me-so-i-could-just-name-this-website.html" rel="next" title="Man, I wish inspiration could strike me so I could just name this website">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer>
            Contents Â© 2016         <a href="mailto:adamrpah@gmail.com">Adam Pah</a> 
<br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a>

            
        </footer>
</div>
</div>

            <script src="../assets/js/all-nocdn.js"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_twitter"></a>
</div>
<!-- End of social buttons -->


    <script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script type="text/javascript">
  var _gaq = _gaq || [];
  var pluginUrl = 
    '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);  
  _gaq.push(['_setAccount', 'UA-24774016-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
